"use strict";Aero.view.guide.admin={id:"",renderRoles:function(){this.renderMapping("roles")},renderPathways:function(){this.renderMapping("pathways")},renderMapping:function(e){Aero[e].getAll(function(i){$q(".aero-"+e).html("").append('<option value="">- Select a '+e.slice(0,-1)+" -</option>");for(var o in i)i.hasOwnProperty(o)&&$q(".aero-"+e).append('<option value="'+i[o].id+'">'+i[o].title+"</option>")}),Aero[e].getByGuideid(Aero.view.admin.guideid,function(i){$q(".aero-"+e+"-list ul").html("");for(var o in i)i.hasOwnProperty(o)&&$q(".aero-"+e+"-list ul").append('<li class="clearfix" data-id="'+i[o].id+'"><a class="aero-btn-grey"><i class="fa fa-times"></i></a><span>'+i[o].title+"</span></li>")})},save:function(){var e=Aero.view.admin.guideid,i=$q("#editGuideFrm").aeroSerialize();i.desc=$q("#aeroEditor").trumbowyg("html"),Aero.view.admin.close(),i.active="1"==i.active,i.auto="1"==i.auto||null,i.autoPage="1"==i.autoPage||null,""!=e?(i.id=e,Aero.guide.update(i)):Aero.guide.create(i,function(e){Aero.tip.start(e)})},setEvents:function(e){var i=this;$q("body").off("click.aeroGCreate").on("click.aeroGCreate","a.aero-btn-create",function(){return Aero.view.admin.guideid="",Aero.view.admin.render("guide",{}),!1}),$q("body").off("click.aeroSMenu").on("click.aeroSMenu",".aero-strip-menu a",function(){var e=$q(this).parents("li:eq(0)");return Aero.view.admin.renderMenu(e),!1}),$q("body").off("click.aeroGDelete").on("click.aeroGDelete",".aero-guides ul li a.aero-delete",function(){var e=$q(this).parents("li:eq(0)"),i=e.data("guideid"),o=e.find("a:last").text();return Aero.confirm({ok:AeroStep.lang.del,title:o,msg:AeroStep.lang.guidedelconf,onConfirm:function(){Aero.guide.destroy(i)}}),!1}),$q("body").off("click.aeroGEdit").on("click.aeroGEdit",".aero-guides ul li a.aero-edit",function(){return Aero.view.admin.edit($q(this)),!1}),$q("body").off("keypress.gsa").on("keypress.gsa","#editGuideFrm input",function(e){if("13"==(e.keyCode||e.which))return Aero.model.guide.validate()&&i.save(),!1}),$q("body").off("click.aeroGSave").on("click.aeroGSave",".aero-editing-guide .aero-btn-save",function(){if(Aero.model.guide.validate())return i.save(),!1}),$q("body").off("click.apA").on("click.apA",".aero-pathways-search a",function(){var e=$q(".aero-pathways").val();return""!=e&&Aero.pathways.createMapping(e,Aero.view.admin.guideid),!1}),$q("body").off("click.dpA").on("click.dpA",".aero-pathways-list a",function(){var e=$q(this).parent().data("id");return Aero.confirm({ok:"unlink",title:"Removing pathway link",msg:"Are you sure you want to remove this pathway?",onConfirm:function(){return Aero.pathways.destroyMapping(e,Aero.view.admin.guideid),!1}}),!1}),$q("body").off("click.arA").on("click.arA",".aero-roles-search a",function(){var e=$q(".aero-roles").val();return""!=e&&Aero.roles.createMapping(e,Aero.view.admin.guideid),!1}),$q("body").off("click.arcs").on("click.arcs",".aero-section input[name='aero_isRestrict']",function(){$q(".aero-color-wrapper").hide(),$q(this).is(":checked")&&$q(".aero-color-wrapper").show()}),$q("body").off("click.drA").on("click.drA",".aero-roles-list a",function(){var e=$q(this).parent().data("id");return Aero.confirm({ok:"unlink",title:"Removing role link",msg:"Are you sure you want to remove this role?",onConfirm:function(){return Aero.roles.destroyMapping(e,Aero.view.admin.guideid),!1}}),!1})}};