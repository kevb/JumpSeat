"use strict";Aero.picker={options:{onStart:function(){Aero.log("Starting picker","info")},callback:function(e){Aero.log("Starting picker path:"+e,"info")}},init:function(e){var t=this,o=$q(".aero-picker"),n=$q.extend({},this.options,e);n.onStart(),0==o.length&&(o=$q('<div class="aero-picker" style="border:0.2em dashed #0599c3; position: fixed; top: 0; left: 0; height: 100%; width: 100%; z-index:999999999999;"></div>'),$q("body").append(o),o.on("mousemove.aeroPicker",function(e){t.latch(e)}).on("mousedown.aeroPicker",function(e){n.callback(t.get(e))}))},destroy:function(){$q(".aero-picker").remove(),$q("*").off(".aeroPicker")},latch:function(e){var t=this.getElementByPos(e.pageX,e.pageY);if(t.length>0){var o=!1,n=$q(".aero-picker"),r=this.scrollOffset(t),i=r.top,c=r.left,a=t.outerHeight(),s=t.outerWidth();if("IFRAME"==t.prop("tagName")){o=!0;var l=t.get(0),f=t.contentWindow?l.contentWindow:l.contentDocument.defaultView,u=$q(f.document.elementFromPoint(e.pageX-c,e.pageY-i)),p=u.offset()}t.trigger("mouseover"),t.trigger("mouseenter"),o&&(i+=p.top,c+=p.left,a=u.outerHeight(),s=u.outerWidth()),a>0&&s>0&&n.css({height:a+"px",width:s+"px",top:i+"px",left:c+"px"})}},get:function(e){return this.getElementByPos(e.pageX,e.pageY).getSelector({ignore:{classes:["ae-active-el"]}})[0]},getElementByPos:function(e,t){$q(".aero-picker").hide(),e-=$q(document).scrollLeft(),t-=$q(document).scrollTop();var o=document.elementFromPoint(e,t);return $q(".aero-picker").show(),$q(o)},scrollOffset:function(e){var t=e.offset();return t.top-=$q(document).scrollTop(),t.left-=$q(document).scrollLeft(),t},setEvents:function(){var e=this;$q("body").on("mousemove.aeroPicker","*",function(t){e.latch(t)}),$q(document).keyup(function(t){27==t.keyCode&&(e.destroy(),Aero.view.sidebar.show(!1,0))})}};