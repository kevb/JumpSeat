"use strict";var App={id:null};App.model={url:"api/apps",defaults:function(){return{title:"",description:"",active:!0}},validate:function(){var e=$q(".saving form").isFormValid(),a=$q('.saving input[name="host"]'),i=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(a.val());return a.val()==IAPP||i||(e=!1,a.addClass("aero-require-error")),e},save:function(e){var a=e.parents(".card").find("form").aeroSerialize();a.active=!!a.active,a.aliases=[],a.host=a.host.replace(/\/$/,""),$q(".alias-input").each(function(){var e=$q(this).val();e&&(e=e.replace(/\/$/,""),a.aliases.push(e))}),App.model.validate()&&(App.id?App.api.update(a,App.id):App.api.create(a))}},App.api={get:function(e,a){var i={};a&&(i={id:a}),Aero.send(App.model.url,i,function(a){e&&e(a)},"GET")},create:function(e,a){Aero.send(App.model.url,e,function(i){i?(e.id=i,App.view.updateCard(e),Utils.card.flip($q(".saving form"),!0,function(){$q(".saving form").remove(),$q(".saving").removeClass("saving"),a&&a(i)})):App.view.renderIssue()},"POST")},update:function(e,a,i){e.id=a,Aero.send(App.model.url,e,function(e){e?(App.view.updateCard(e),Utils.card.flip($q(".saving form"),!0,function(){$q(".saving").removeClass("saving"),i&&i(e)})):App.view.renderIssue()},"PUT")},del:function(e){Aero.send(App.model.url,{id:e},function(e){Utils.card.remove($q(".deleting"))},"DELETE")}};